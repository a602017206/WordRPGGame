# 技能书学习和等级同步快速测试指南

## 🚀 快速测试流程（5分钟）

### 准备工作
- ✅ 开发服务器已运行（http://localhost:5173）
- ✅ 点击预览按钮访问游戏

### 测试1：技能书学习功能（2分钟）

#### 步骤：
1. **创建角色**
   - 创建一个新角色（例如：法师职业）
   - 进入冒险界面

2. **获得技能书**
   - 点击"寻找敌人"开始战斗
   - 使用攻击/技能击败敌人
   - 重复战斗3-5次，直到获得技能书
   - 观察战斗日志：应该看到"获得技能书：📕 XXX技能书！"

3. **打开背包**
   - 点击右上角"🎒 背包"按钮
   - 确认"角色背包"标签下有技能书

4. **学习技能书**
   - 找到技能书道具
   - 观察按钮状态：
     - ✓ 如果是新技能 → 显示"📚 学习"（粉色按钮）
     - ✓ 如果已学习 → 显示"✓ 已学习"（绿色按钮）
   - 点击"📚 学习"按钮
   - 确认弹窗提示："成功学习技能：XXX！"
   - 技能书应该从背包消失

5. **验证学习结果**
   - 关闭背包
   - 点击"📚 技能管理"按钮
   - 切换到"已学习技能"标签
   - 确认新学习的技能在列表中

#### 预期结果：
- ✅ 技能书正常掉落
- ✅ "学习"按钮正常显示
- ✅ 点击后成功学习技能
- ✅ 技能书被消耗
- ✅ 新技能出现在已学习列表

### 测试2：重复学习检测（1分钟）

#### 步骤：
1. **再次获得相同技能书**
   - 继续战斗，直到获得已学习技能的技能书
   - 或者清除localStorage重新开始

2. **尝试学习**
   - 打开背包
   - 找到已学习技能的技能书
   - 观察按钮状态：应显示"✓ 已学习"（绿色）
   - 点击按钮

3. **验证提示**
   - 确认弹窗："已经学习过技能「XXX」，无法重复学习！"
   - 技能书仍然在背包中

#### 预期结果：
- ✅ 已学习技能的按钮显示为绿色"✓ 已学习"
- ✅ 点击后给出正确提示
- ✅ 技能书不被消耗
- ✅ 技能列表没有重复

### 测试3：技能等级同步（2分钟）

#### 步骤：
1. **装备技能**
   - 打开"技能管理"
   - 在"已学习技能"中选择一个技能
   - 点击"槽1"装备到槽位1
   - 切换到"已装备技能"标签
   - 记录技能当前等级（如：Lv.1）

2. **升级技能**
   - 切换回"已学习技能"标签
   - 找到刚才装备的技能
   - 点击"⬆️"或"升级"按钮
   - 确认消耗金币（查看顶部金币数量）
   - 确认弹窗："技能 XXX 升级到 Lv.2"

3. **验证同步**
   - 切换到"已装备技能"标签
   - **关键检查**：技能等级应显示为 Lv.2
   - 检查技能数值：
     - 💥 伤害值应该增加
     - 💧 MP消耗可能增加
     - ⏱️ 冷却时间可能减少

4. **刷新页面验证**
   - 按F5刷新页面
   - 重新进入冒险界面
   - 打开技能管理
   - 确认技能等级仍然是Lv.2

#### 预期结果：
- ✅ 升级后"已装备技能"中的等级立即更新
- ✅ 技能数值（伤害/MP/冷却）正确显示
- ✅ 刷新后等级正确保存
- ✅ 所有位置的等级显示一致

## 🐛 常见问题排查

### 问题1：技能书掉落不了
**原因**：掉落概率较低（约9%）  
**解决**：多战斗几次，或者调整掉落概率

### 问题2：学习按钮不显示
**原因**：不是技能书道具  
**验证**：检查道具名称是否包含"技能书"

### 问题3：技能等级没有同步
**原因**：缓存问题  
**解决**：
1. 清除浏览器缓存
2. 清除localStorage：`localStorage.clear()`
3. 重新创建角色测试

### 问题4：学习后技能没有出现
**原因**：职业不符  
**验证**：检查技能类型是否匹配角色职业

## 📊 完整测试矩阵

| 测试项 | 操作 | 预期结果 | 状态 |
|--------|------|----------|------|
| 技能书掉落 | 击败怪物 | 概率掉落技能书 | ⬜ |
| 学习新技能 | 点击学习按钮 | 成功学习，技能书消失 | ⬜ |
| 重复学习 | 点击已学习技能书 | 提示无法重复，技能书保留 | ⬜ |
| 职业限制 | 学习其他职业技能 | 提示职业不符 | ⬜ |
| 装备技能 | 装备到槽位 | 槽位显示技能 | ⬜ |
| 升级技能 | 点击升级 | 等级+1，金币减少 | ⬜ |
| 等级同步 | 升级后查看槽位 | 槽位显示新等级 | ⬜ |
| 数值更新 | 升级后查看属性 | 伤害/MP/冷却更新 | ⬜ |
| 刷新保存 | F5刷新页面 | 等级正确保存 | ⬜ |
| 按钮样式 | 查看学习按钮 | 已学习显示绿色 | ⬜ |

## 🎯 性能测试

### 测试场景：快速连续操作
1. 连续学习10个技能书
2. 连续升级同一个技能5次
3. 频繁切换标签页

### 预期表现：
- ✅ UI响应流畅，无卡顿
- ✅ 数据正确保存
- ✅ 内存占用正常

## 📝 测试记录模板

```
测试日期：__________
测试人员：__________
浏览器：__________

技能书学习功能：
- [ ] 技能书正常掉落
- [ ] 学习按钮正常显示
- [ ] 学习功能正常工作
- [ ] 重复学习检测正常
- [ ] 职业限制检测正常

技能等级同步：
- [ ] 升级后槽位等级更新
- [ ] 数值正确计算
- [ ] 刷新后数据保存
- [ ] 多槽位同步正常

问题记录：
____________________
____________________
____________________
```

## ✅ 测试完成检查清单

完成以下所有测试后，可以认为功能开发完成：

- [ ] 技能书可以正常学习
- [ ] 已学习技能无法重复学习
- [ ] 重复学习提示清晰
- [ ] 技能书按钮状态正确
- [ ] 技能等级实时同步
- [ ] 刷新后数据正确
- [ ] 职业限制正常工作
- [ ] UI样式美观一致
- [ ] 无明显bug
- [ ] 性能表现良好

---

**测试时间**：约5分钟  
**难度**：简单  
**重要性**：高 ⭐⭐⭐⭐⭐
