# ğŸš€ éƒ¨ç½²é…ç½®æ–‡ä»¶è¯´æ˜

æœ¬é¡¹ç›®å·²é…ç½®å¥½è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼Œæ”¯æŒ GitLab Pages å’Œ GitHub Pages ä¸¤ç§æ–¹å¼ã€‚

## ğŸ“ æ–°å¢æ–‡ä»¶åˆ—è¡¨

```
RPGGame/
â”œâ”€â”€ .gitlab-ci.yml              # GitLab CI/CD é…ç½®æ–‡ä»¶
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ deploy.yml          # GitHub Actions é…ç½®æ–‡ä»¶
â”œâ”€â”€ deploy.sh                   # æœ¬åœ°éƒ¨ç½²æµ‹è¯•è„šæœ¬
â”œâ”€â”€ DEPLOYMENT.md               # è¯¦ç»†éƒ¨ç½²æŒ‡å—
â”œâ”€â”€ .gitignore                  # Git å¿½ç•¥æ–‡ä»¶é…ç½®
â””â”€â”€ vite.config.ts              # æ›´æ–°äº† base è·¯å¾„é…ç½®
```

## ğŸ”§ é…ç½®æ–‡ä»¶è¯´æ˜

### 1. `.gitlab-ci.yml`
**ç”¨é€”**: GitLab CI/CD è‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²

**æµç¨‹**:
```
æ¨é€ä»£ç  â†’ å®‰è£…ä¾èµ– â†’ ç±»å‹æ£€æŸ¥ â†’ æ„å»º â†’ éƒ¨ç½²åˆ° GitLab Pages
```

**è§¦å‘æ¡ä»¶**: æ¨é€åˆ° `main` æˆ– `master` åˆ†æ”¯

**éƒ¨ç½²åœ°å€**: `https://username.gitlab.io/rpggame/`

---

### 2. `.github/workflows/deploy.yml`
**ç”¨é€”**: GitHub Actions è‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²

**æµç¨‹**:
```
æ¨é€ä»£ç  â†’ å®‰è£…ä¾èµ– â†’ ç±»å‹æ£€æŸ¥ â†’ æ„å»º â†’ éƒ¨ç½²åˆ° GitHub Pages
```

**è§¦å‘æ¡ä»¶**: 
- æ¨é€åˆ° `main` åˆ†æ”¯
- æ‰‹åŠ¨è§¦å‘ï¼ˆworkflow_dispatchï¼‰

**éƒ¨ç½²åœ°å€**: `https://username.github.io/rpggame/`

---

### 3. `vite.config.ts`
**æ›´æ–°å†…å®¹**:
- æ·»åŠ äº† `base` è·¯å¾„é…ç½®
- æ·»åŠ äº†æ„å»ºä¼˜åŒ–é€‰é¡¹
- é…ç½®äº†è¾“å‡ºç›®å½•å’Œä»£ç åˆ†å‰²

**å…³é”®é…ç½®**:
```typescript
base: process.env.CI ? '/' : '/',  // éƒ¨ç½²è·¯å¾„
outDir: 'dist',                     // è¾“å‡ºç›®å½•
sourcemap: false,                   // ç”Ÿäº§ç¯å¢ƒä¸ç”Ÿæˆ sourcemap
```

---

### 4. `deploy.sh`
**ç”¨é€”**: æœ¬åœ°æµ‹è¯•éƒ¨ç½²è„šæœ¬

**åŠŸèƒ½**:
- âœ… æ£€æŸ¥ Node.js ç‰ˆæœ¬
- âœ… å®‰è£…ä¾èµ–
- âœ… æ‰§è¡Œç±»å‹æ£€æŸ¥
- âœ… æ„å»ºé¡¹ç›®
- âœ… æ˜¾ç¤ºæ„å»ºäº§ç‰©ä¿¡æ¯

**ä½¿ç”¨æ–¹æ³•**:
```bash
npm run deploy:test
# æˆ–
./deploy.sh
```

---

## ğŸ¯ å¿«é€Ÿå¼€å§‹

### æ–¹æ¡ˆ A: éƒ¨ç½²åˆ° GitLab Pages

1. **åˆ›å»º GitLab ä»“åº“** å¹¶æ¨é€ä»£ç 
   ```bash
   git remote add origin https://gitlab.com/username/rpggame.git
   git push -u origin main
   ```

2. **ç­‰å¾… CI/CD è‡ªåŠ¨æ‰§è¡Œ**
   - è®¿é—®é¡¹ç›®çš„ CI/CD > Pipelines é¡µé¢
   - æŸ¥çœ‹æ„å»ºå’Œéƒ¨ç½²çŠ¶æ€

3. **è®¿é—®ç½‘ç«™**
   - è¿›å…¥ Settings > Pages
   - å¤åˆ¶è®¿é—®åœ°å€

---

### æ–¹æ¡ˆ B: éƒ¨ç½²åˆ° GitHub Pages

1. **åˆ›å»º GitHub ä»“åº“** å¹¶æ¨é€ä»£ç 
   ```bash
   git remote add origin https://github.com/username/rpggame.git
   git push -u origin main
   ```

2. **å¯ç”¨ GitHub Pages**
   - Settings > Pages
   - Source é€‰æ‹© "GitHub Actions"

3. **æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€**
   - ç‚¹å‡» Actions æ ‡ç­¾
   - æŸ¥çœ‹å·¥ä½œæµæ‰§è¡Œæƒ…å†µ

4. **è®¿é—®ç½‘ç«™**
   - éƒ¨ç½²æˆåŠŸåä¼šæ˜¾ç¤ºè®¿é—®åœ°å€

---

## âš™ï¸ è‡ªå®šä¹‰é…ç½®

### ä¿®æ”¹éƒ¨ç½²è·¯å¾„

å¦‚æœæ‚¨çš„ä»“åº“åä¸æ˜¯ `rpggame`ï¼Œéœ€è¦ä¿®æ”¹ `vite.config.ts`:

```typescript
// å‡è®¾æ‚¨çš„ä»“åº“åæ˜¯ my-game
export default defineConfig({
  base: '/my-game/',  // æ”¹ä¸ºæ‚¨çš„ä»“åº“å
  // ...
})
```

### ä¿®æ”¹éƒ¨ç½²åˆ†æ”¯

**GitLab**:
ç¼–è¾‘ `.gitlab-ci.yml`ï¼Œä¿®æ”¹ `only` éƒ¨åˆ†ï¼š
```yaml
pages:
  only:
    - main  # æ”¹ä¸ºæ‚¨çš„åˆ†æ”¯å
```

**GitHub**:
ç¼–è¾‘ `.github/workflows/deploy.yml`ï¼Œä¿®æ”¹ `branches` éƒ¨åˆ†ï¼š
```yaml
on:
  push:
    branches:
      - main  # æ”¹ä¸ºæ‚¨çš„åˆ†æ”¯å
```

---

## ğŸ“‹ éƒ¨ç½²å‰æ£€æŸ¥æ¸…å•

- [ ] ç¡®è®¤ Node.js ç‰ˆæœ¬ >= 18
- [ ] ç¡®è®¤æ‰€æœ‰ä¾èµ–å·²å®‰è£… (`npm install`)
- [ ] ç¡®è®¤ç±»å‹æ£€æŸ¥é€šè¿‡ (`npm run type-check`)
- [ ] ç¡®è®¤æœ¬åœ°æ„å»ºæˆåŠŸ (`npm run build`)
- [ ] ç¡®è®¤ `vite.config.ts` ä¸­çš„ `base` è·¯å¾„æ­£ç¡®
- [ ] ç¡®è®¤å·²æ·»åŠ  `.gitignore` æ–‡ä»¶
- [ ] ç¡®è®¤ä»£ç å·²æ¨é€åˆ°è¿œç¨‹ä»“åº“

---

## ğŸ› æ•…éšœæ’æŸ¥

### æ„å»ºå¤±è´¥
1. æ£€æŸ¥ Node.js ç‰ˆæœ¬æ˜¯å¦å…¼å®¹
2. æŸ¥çœ‹ CI/CD æ—¥å¿—çš„é”™è¯¯ä¿¡æ¯
3. åœ¨æœ¬åœ°è¿è¡Œ `npm run type-check`
4. åœ¨æœ¬åœ°è¿è¡Œ `npm run build`

### é¡µé¢è®¿é—® 404
1. æ£€æŸ¥ `base` è·¯å¾„é…ç½®
2. ç¡®è®¤ä»“åº“åä¸é…ç½®åŒ¹é…
3. ç­‰å¾… DNS ç”Ÿæ•ˆï¼ˆé¦–æ¬¡éƒ¨ç½²éœ€è¦å‡ åˆ†é’Ÿï¼‰

### é™æ€èµ„æºåŠ è½½å¤±è´¥
1. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°çš„é”™è¯¯ä¿¡æ¯
2. ç¡®è®¤ `base` è·¯å¾„ä»¥ `/` å¼€å¤´å’Œç»“å°¾
3. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜åé‡è¯•

---

## ğŸ“š ç›¸å…³å‘½ä»¤

```bash
# å®‰è£…ä¾èµ–
npm install

# æœ¬åœ°å¼€å‘
npm run dev

# ç±»å‹æ£€æŸ¥
npm run type-check

# æ„å»ºé¡¹ç›®
npm run build

# é¢„è§ˆæ„å»ºäº§ç‰©
npm run preview

# æµ‹è¯•éƒ¨ç½²æµç¨‹
npm run deploy:test

# æ¨é€åˆ°è¿œç¨‹ä»“åº“
git push origin main
```

---

## ğŸ“– æ›´å¤šä¿¡æ¯

è¯¦ç»†çš„éƒ¨ç½²æŒ‡å—è¯·å‚è€ƒ [DEPLOYMENT.md](./DEPLOYMENT.md)

---

**ç¥éƒ¨ç½²é¡ºåˆ©ï¼ğŸ‰**
