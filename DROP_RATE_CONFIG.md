# ğŸ² é“å…·æ‰è½ç‡é…ç½®æŒ‡å—

## ğŸ“Š å½“å‰æ‰è½ç‡é…ç½®

### æŠ€èƒ½ä¹¦æ‰è½ç‡ï¼ˆå·²ä¼˜åŒ–ï¼‰

**æ–‡ä»¶ä½ç½®**ï¼š`src/views/AdventureView.vue` ç¬¬ 267-276 è¡Œ

**å½“å‰é…ç½®**ï¼ˆå·²æå‡5å€ï¼‰ï¼š
- ğŸ¯ **æ€»ä½“æŠ€èƒ½ä¹¦æ‰è½ç‡ï¼š45%**
- ğŸ“¦ é“å…·æ‰è½è§¦å‘ç‡ï¼š75%
- ğŸ“š æŠ€èƒ½ä¹¦åœ¨æ‰è½ä¸­çš„å æ¯”ï¼š60%
- ğŸ æ™®é€šé“å…·åœ¨æ‰è½ä¸­çš„å æ¯”ï¼š40%

**è®¡ç®—å…¬å¼**ï¼š
```
æŠ€èƒ½ä¹¦æ‰è½ç‡ = é“å…·æ‰è½ç‡ Ã— æŠ€èƒ½ä¹¦å æ¯”
             = 75% Ã— 60%
             = 45%
```

**åŸå§‹é…ç½®**ï¼ˆå‚è€ƒï¼‰ï¼š
- æ€»ä½“æŠ€èƒ½ä¹¦æ‰è½ç‡ï¼š9%
- é“å…·æ‰è½è§¦å‘ç‡ï¼š30%
- æŠ€èƒ½ä¹¦åœ¨æ‰è½ä¸­çš„å æ¯”ï¼š30%

---

## ğŸ”§ å¦‚ä½•è‡ªå®šä¹‰æ‰è½ç‡

### 1. è°ƒæ•´æ€»ä½“é“å…·æ‰è½ç‡

**ä½ç½®**ï¼š`src/views/AdventureView.vue` ç¬¬ 269 è¡Œ

```typescript
if (Math.random() > 0.75) return // 75% æ‰è½ç‡
```

**ä¿®æ”¹æ–¹æ³•**ï¼š
- ä¿®æ”¹ `0.75` è¿™ä¸ªæ•°å€¼
- æ•°å€¼è¶Šå¤§ = æ‰è½ç‡è¶Šé«˜
- æ•°å€¼èŒƒå›´ï¼š0.0 ~ 1.0

**ç¤ºä¾‹**ï¼š
```typescript
if (Math.random() > 0.5) return  // 50% æ‰è½ç‡
if (Math.random() > 0.9) return  // 90% æ‰è½ç‡
if (Math.random() > 1.0) return  // 100% å¿…å®šæ‰è½
```

### 2. è°ƒæ•´æŠ€èƒ½ä¹¦åœ¨æ‰è½ä¸­çš„å æ¯”

**ä½ç½®**ï¼š`src/views/AdventureView.vue` ç¬¬ 273 è¡Œ

```typescript
if (Math.random() < 0.6) {  // 60% æ¦‚ç‡æ˜¯æŠ€èƒ½ä¹¦
  dropSkillBook()
  return
}
```

**ä¿®æ”¹æ–¹æ³•**ï¼š
- ä¿®æ”¹ `0.6` è¿™ä¸ªæ•°å€¼
- æ•°å€¼è¶Šå¤§ = æŠ€èƒ½ä¹¦å æ¯”è¶Šé«˜
- æ•°å€¼èŒƒå›´ï¼š0.0 ~ 1.0

**ç¤ºä¾‹**ï¼š
```typescript
if (Math.random() < 0.3) {   // 30% æŠ€èƒ½ä¹¦ï¼Œ70% æ™®é€šé“å…·
if (Math.random() < 0.8) {   // 80% æŠ€èƒ½ä¹¦ï¼Œ20% æ™®é€šé“å…·
if (Math.random() < 1.0) {   // 100% å…¨æ˜¯æŠ€èƒ½ä¹¦ï¼Œä¸æ‰è½æ™®é€šé“å…·
```

### 3. å¿«é€Ÿé…ç½®è¡¨

| æœŸæœ›æŠ€èƒ½ä¹¦æ‰è½ç‡ | é“å…·æ‰è½ç‡ | æŠ€èƒ½ä¹¦å æ¯” | é…ç½®ä»£ç  |
|-----------------|-----------|-----------|----------|
| 5% | 0.25 (25%) | 0.2 (20%) | `> 0.25` å’Œ `< 0.2` |
| 10% | 0.5 (50%) | 0.2 (20%) | `> 0.5` å’Œ `< 0.2` |
| 20% | 0.5 (50%) | 0.4 (40%) | `> 0.5` å’Œ `< 0.4` |
| 30% | 0.6 (60%) | 0.5 (50%) | `> 0.6` å’Œ `< 0.5` |
| **45%** âœ… | **0.75 (75%)** | **0.6 (60%)** | **`> 0.75` å’Œ `< 0.6`** |
| 50% | 1.0 (100%) | 0.5 (50%) | `> 1.0` å’Œ `< 0.5` |
| 80% | 1.0 (100%) | 0.8 (80%) | `> 1.0` å’Œ `< 0.8` |
| 100% | 1.0 (100%) | 1.0 (100%) | `> 1.0` å’Œ `< 1.0` |

---

## ğŸ“ å®Œæ•´ä»£ç ç¤ºä¾‹

### å½“å‰é…ç½®ï¼ˆ45% æŠ€èƒ½ä¹¦æ‰è½ç‡ï¼‰

```typescript
// éšæœºæ‰è½é“å…·
const dropRandomItem = () => {
  if (!adventure) return
  if (Math.random() > 0.75) return // 75% æ‰è½ç‡ï¼ˆæå‡2.5å€ï¼‰
  
  // 60%æ¦‚ç‡æ‰è½æŠ€èƒ½ä¹¦ï¼Œ40%æ¦‚ç‡æ‰è½æ™®é€šé“å…·ï¼ˆåŸ30%æå‡2å€ï¼‰
  // æ€»ä½“æŠ€èƒ½ä¹¦æ‰è½ç‡ï¼š75% Ã— 60% = 45%ï¼ˆåŸ9%çš„5å€ï¼‰
  if (Math.random() < 0.6) {
    dropSkillBook()
    return
  }
  
  // ... æ™®é€šé“å…·æ‰è½é€»è¾‘
}
```

### æµ‹è¯•æ¨¡å¼é…ç½®ï¼ˆ100% æŠ€èƒ½ä¹¦æ‰è½ï¼‰

å¦‚æœæ‚¨æƒ³å¿«é€Ÿæµ‹è¯•ï¼Œå¯ä»¥ä¸´æ—¶æ”¹ä¸ºï¼š

```typescript
// éšæœºæ‰è½é“å…·
const dropRandomItem = () => {
  if (!adventure) return
  // if (Math.random() > 1.0) return // 100% å¿…å®šæ‰è½é“å…·
  
  // if (Math.random() < 1.0) {      // 100% å¿…å®šæ˜¯æŠ€èƒ½ä¹¦
  //   dropSkillBook()
  //   return
  // }
  
  // ç®€åŒ–ç‰ˆï¼šç›´æ¥æ‰è½æŠ€èƒ½ä¹¦
  dropSkillBook()
  return
}
```

### ä¿å®ˆé…ç½®ï¼ˆ15% æŠ€èƒ½ä¹¦æ‰è½ç‡ï¼‰

é€‚åˆæ­£å¼æ¸¸æˆå¹³è¡¡ï¼š

```typescript
// éšæœºæ‰è½é“å…·
const dropRandomItem = () => {
  if (!adventure) return
  if (Math.random() > 0.5) return // 50% æ‰è½ç‡
  
  // 30%æ¦‚ç‡æ‰è½æŠ€èƒ½ä¹¦ï¼Œ70%æ¦‚ç‡æ‰è½æ™®é€šé“å…·
  // æ€»ä½“æŠ€èƒ½ä¹¦æ‰è½ç‡ï¼š50% Ã— 30% = 15%
  if (Math.random() < 0.3) {
    dropSkillBook()
    return
  }
  
  // ... æ™®é€šé“å…·æ‰è½é€»è¾‘
}
```

---

## ğŸ¯ å…¶ä»–æ‰è½ç›¸å…³é…ç½®

### 1. æŠ€èƒ½ä¹¦èŒä¸šæƒé‡

**ä½ç½®**ï¼š`src/views/AdventureView.vue` ç¬¬ 302-310 è¡Œ

```typescript
// 70%æ¦‚ç‡æ‰è½æœ¬èŒä¸šæŠ€èƒ½ä¹¦ï¼Œ30%æ¦‚ç‡æ‰è½å…¶ä»–èŒä¸šæŠ€èƒ½ä¹¦
const isOwnClass = skill.skillType === character.value!.class.toLowerCase()
if (isOwnClass) {
  return Math.random() < 0.7  // ä¿®æ”¹è¿™é‡Œè°ƒæ•´æœ¬èŒä¸šæŠ€èƒ½ä¹¦æ¦‚ç‡
} else {
  return Math.random() < 0.3  // ä¿®æ”¹è¿™é‡Œè°ƒæ•´å…¶ä»–èŒä¸šæŠ€èƒ½ä¹¦æ¦‚ç‡
}
```

**å»ºè®®é…ç½®**ï¼š
- æ–°æ‰‹å‹å¥½ï¼š`0.9` å’Œ `0.1`ï¼ˆ90% æœ¬èŒä¸šï¼‰
- å¹³è¡¡æ¨¡å¼ï¼š`0.7` å’Œ `0.3`ï¼ˆå½“å‰é…ç½®ï¼‰
- æ”¶é›†æŒ‘æˆ˜ï¼š`0.5` å’Œ `0.5`ï¼ˆ50/50 éšæœºï¼‰

### 2. æŠ€èƒ½ä¹¦ç¨€æœ‰åº¦æƒé‡

**ä½ç½®**ï¼š`src/views/AdventureView.vue` ç¬¬ 315-321 è¡Œ

```typescript
const rarityWeights: any = {
  common: 50,      // æ™®é€šæŠ€èƒ½æƒé‡
  uncommon: 30,    // ä¼˜ç§€æŠ€èƒ½æƒé‡
  rare: 15,        // ç¨€æœ‰æŠ€èƒ½æƒé‡
  epic: 4,         // å²è¯—æŠ€èƒ½æƒé‡
  legendary: 1     // ä¼ è¯´æŠ€èƒ½æƒé‡
}
```

**ä¿®æ”¹ç¤ºä¾‹**ï¼š
```typescript
// é«˜ç¨€æœ‰åº¦æ¨¡å¼ï¼ˆæ›´å®¹æ˜“è·å¾—é«˜çº§æŠ€èƒ½ï¼‰
const rarityWeights: any = {
  common: 20,
  uncommon: 20,
  rare: 20,
  epic: 20,
  legendary: 20
}

// ä½ç¨€æœ‰åº¦æ¨¡å¼ï¼ˆæ›´éš¾è·å¾—é«˜çº§æŠ€èƒ½ï¼‰
const rarityWeights: any = {
  common: 70,
  uncommon: 20,
  rare: 8,
  epic: 1.5,
  legendary: 0.5
}
```

### 3. æ™®é€šé“å…·æ‰è½ç±»å‹

**ä½ç½®**ï¼š`src/views/AdventureView.vue` ç¬¬ 278-284 è¡Œ

å¯ä»¥æ·»åŠ æˆ–åˆ é™¤é“å…·æ¨¡æ¿ï¼š

```typescript
const itemTemplates = [
  { name: 'ç”Ÿå‘½è¯æ°´', ... },
  { name: 'é­”æ³•è¯æ°´', ... },
  // æ·»åŠ æ›´å¤šé“å…·...
  { name: 'ç»éªŒå·è½´', description: 'è·å¾—100ç»éªŒå€¼', type: 'consumable', ... }
]
```

---

## ğŸ§ª æµ‹è¯•å»ºè®®

### å¿«é€Ÿæµ‹è¯•æµç¨‹

1. **è¿›å…¥æ¸¸æˆ**
   - è®¿é—® http://localhost:5174
   - åˆ›å»ºæˆ–é€‰æ‹©è§’è‰²
   - è¿›å…¥å†’é™©æ¨¡å¼

2. **è§¦å‘æ‰è½**
   - ç‚¹å‡»"ğŸ¯ å¯»æ‰¾æ•Œäºº"
   - å‡»è´¥æ•Œäººï¼ˆä½¿ç”¨æ”»å‡»æˆ–æŠ€èƒ½ï¼‰
   - è§‚å¯Ÿæˆ˜æ–—æ—¥å¿—ä¸­çš„æ‰è½æç¤º

3. **éªŒè¯æ‰è½ç‡**
   - å‡»è´¥ 10 ä¸ªæ•Œäºº
   - é¢„æœŸï¼šçº¦ 4-5 ä¸ªæŠ€èƒ½ä¹¦ï¼ˆ45% æ‰è½ç‡ï¼‰
   - æ‰“å¼€èƒŒåŒ…æŸ¥çœ‹æŠ€èƒ½ä¹¦

4. **æµ‹è¯•å­¦ä¹ åŠŸèƒ½**
   - ç‚¹å‡»æŠ€èƒ½ä¹¦çš„"ğŸ“š å­¦ä¹ "æŒ‰é’®
   - éªŒè¯æŠ€èƒ½æ˜¯å¦æ·»åŠ åˆ°"å·²å­¦ä¹ æŠ€èƒ½"
   - éªŒè¯èŒä¸šä¿¡æ¯æ˜¯å¦æ­£ç¡®æ˜¾ç¤º

### è°ƒè¯•æ¨¡å¼

å¦‚éœ€è°ƒè¯•ï¼Œå¯ä»¥åœ¨ `dropRandomItem` å‡½æ•°å¼€å¤´æ·»åŠ æ—¥å¿—ï¼š

```typescript
const dropRandomItem = () => {
  if (!adventure) return
  
  console.log('ğŸ² è§¦å‘æ‰è½æ£€æŸ¥...')
  
  const dropTrigger = Math.random()
  console.log(`æ‰è½è§¦å‘å€¼: ${dropTrigger}, éœ€è¦ > 0.75`)
  
  if (dropTrigger > 0.75) {
    console.log('âŒ æœªè§¦å‘æ‰è½')
    return
  }
  
  console.log('âœ… è§¦å‘æ‰è½ï¼')
  
  const skillBookChance = Math.random()
  console.log(`æŠ€èƒ½ä¹¦æ¦‚ç‡: ${skillBookChance}, éœ€è¦ < 0.6`)
  
  if (skillBookChance < 0.6) {
    console.log('ğŸ“š æ‰è½æŠ€èƒ½ä¹¦ï¼')
    dropSkillBook()
    return
  }
  
  console.log('ğŸ æ‰è½æ™®é€šé“å…·')
  // ... æ™®é€šé“å…·é€»è¾‘
}
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `SKILL_SYSTEM_GUIDE.md` - æŠ€èƒ½ç³»ç»Ÿå®Œæ•´æŒ‡å—
- `SKILL_SYSTEM_FIXES.md` - æŠ€èƒ½ç³»ç»Ÿä¿®å¤è¯´æ˜
- `QUICK_TEST_CHECKLIST.md` - å¿«é€Ÿæµ‹è¯•æ¸…å•

---

## ğŸ”„ ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | æŠ€èƒ½ä¹¦æ‰è½ç‡ | è¯´æ˜ |
|------|------|-------------|------|
| v1.0 | åˆå§‹ç‰ˆæœ¬ | 9% | 30% Ã— 30% |
| v1.1 | 2025-10-24 | **45%** | **75% Ã— 60%ï¼ˆæå‡5å€ï¼‰** âœ… |

---

## âš™ï¸ ä¿®æ”¹ä½ç½®é€ŸæŸ¥

**æ–‡ä»¶**ï¼š`src/views/AdventureView.vue`

- **ç¬¬ 269 è¡Œ**ï¼šæ€»ä½“é“å…·æ‰è½ç‡ï¼ˆå½“å‰ 75%ï¼‰
- **ç¬¬ 273 è¡Œ**ï¼šæŠ€èƒ½ä¹¦å æ¯”ï¼ˆå½“å‰ 60%ï¼‰
- **ç¬¬ 302-310 è¡Œ**ï¼šèŒä¸šæƒé‡é…ç½®
- **ç¬¬ 315-321 è¡Œ**ï¼šç¨€æœ‰åº¦æƒé‡é…ç½®

**ä¿®æ”¹åè®°å¾—**ï¼š
1. âœ… ä¿å­˜æ–‡ä»¶
2. âœ… åˆ·æ–°æµè§ˆå™¨é¡µé¢
3. âœ… è¿›è¡Œå®é™…æµ‹è¯•éªŒè¯

---

**æœ€åæ›´æ–°**ï¼š2025-10-24  
**å½“å‰æŠ€èƒ½ä¹¦æ‰è½ç‡**ï¼š**45%** â­ï¼ˆåŸ9%çš„5å€ï¼‰
