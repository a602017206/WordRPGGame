# MP自动回复功能演示指南

## 🎮 如何体验MP自动回复功能

### 步骤1: 启动游戏
1. 确保开发服务器已启动（当前运行在 http://localhost:5173/）
2. 在浏览器中打开游戏

### 步骤2: 进入冒险模式
1. 在首页选择或创建一个角色
2. 进入角色详情页面
3. 点击 **⚔️ 开始冒险** 按钮
4. 在确认对话框中点击"确定"

### 步骤3: 观察MP自动回复

#### 方法1: 静态观察
1. 进入冒险页面后，注意观察左侧角色状态卡片
2. 找到 **💧 MP** 条，右侧有一个旋转的 ↻ 图标
3. 将鼠标悬停在 ↻ 图标上，会显示提示："每2秒自动回复2-5点"
4. 观察MP数值，每隔2秒会自动增加2-5点

#### 方法2: 消耗后观察
1. 点击 **🎯 寻找敌人** 开始战斗
2. 使用 **✨ 技能** 攻击敌人（消耗20 MP）
3. 观察MP条，会立即减少20点
4. 等待几秒钟，MP会自动开始回复
5. 每2秒恢复2-5点，直到MP回满

#### 方法3: 通过战斗日志观察
1. 在战斗过程中，关注右侧的 **📜 战斗日志**
2. 偶尔会出现绿色边框的日志：`MP自动回复 +X`
3. 这个日志每3次回复才显示1次，避免刷屏

## 🎨 视觉效果展示

### MP条动画
- **脉冲光晕**: MP条边缘有柔和的蓝色光晕，每2秒一次呼吸效果
- **渐变色彩**: 蓝色渐变（浅蓝 → 青色）
- **平滑过渡**: 宽度变化平滑，0.5秒缓动动画

### 回复指示器
- **旋转动画**: ↻ 符号每3秒完整旋转360度
- **透明度变化**: 旋转过程中透明度在60%-100%之间循环
- **颜色**: 与MP条同色系（蓝色 #4facfe）

### 数值显示
```
💧 MP ↻         85 / 100
```
- 左侧: 图标 + 标签 + 回复指示器
- 右侧: 当前值 / 最大值

## 🧪 测试场景

### 场景1: 持续战斗
**目的**: 验证战斗中MP持续回复

1. 开始战斗
2. 混合使用普通攻击和技能
3. 观察MP在消耗和回复之间的平衡
4. 验证长时间战斗后仍能使用技能

**预期结果**: 
- ✅ MP不会完全耗尽
- ✅ 技能使用有一定冷却节奏
- ✅ 可以持续战斗多场

### 场景2: 空闲状态
**目的**: 验证非战斗状态下MP回复

1. 不开始战斗，停留在冒险页面
2. 观察MP条数值变化
3. 如果MP已满，使用技能消耗一些MP
4. 等待观察MP自动回满

**预期结果**:
- ✅ MP每2秒自动增长
- ✅ 达到最大值后停止增长
- ✅ 回复速度稳定（2-5点/次）

### 场景3: 休息功能
**目的**: 验证休息与自动回复的协同

1. 使用技能消耗一些MP
2. 点击 **😴 休息** 按钮
3. 观察MP立即恢复30%
4. 然后继续自动回复直到满

**预期结果**:
- ✅ 休息立即恢复
- ✅ 休息后自动回复继续生效
- ✅ 两种回复方式叠加效果良好

### 场景4: 页面切换
**目的**: 验证定时器正确清理

1. 进入冒险页面，观察MP开始回复
2. 点击 **← 返回** 按钮
3. 返回角色详情页面
4. 再次进入冒险页面
5. 观察MP回复重新开始

**预期结果**:
- ✅ 离开页面后MP值被保存
- ✅ 重新进入时从保存的值继续回复
- ✅ 无控制台错误（定时器正确清理）

### 场景5: 升级测试
**目的**: 验证升级后MP回复适配新上限

1. 通过战斗获得经验值
2. 等待角色升级
3. 观察MP上限提升
4. 验证MP回复目标值自动调整

**预期结果**:
- ✅ 升级时MP自动回满
- ✅ 新的最大MP值生效
- ✅ 继续回复至新的最大值

## 📊 数据观察要点

### MP回复速度
观察10次回复，记录每次回复的数值：
- 最小值应该是 2 点
- 最大值应该是 5 点
- 平均值约为 3.5 点

### 回复间隔
使用秒表计时：
- 每次回复间隔应为 2 秒（±0.1秒误差）
- 回复节奏稳定，不会出现卡顿

### MP上限
验证MP不会超出上限：
- 当前MP值永远 ≤ 最大MP值
- 到达上限后停止增长
- 消耗后立即恢复自动回复

## 🐛 常见问题排查

### 问题1: MP不回复
**可能原因**:
- MP已经满了
- 页面刚加载，等待2秒后开始

**解决方法**:
- 使用技能消耗一些MP
- 等待至少2秒观察

### 问题2: 回复速度异常
**检查项**:
- 查看控制台是否有错误
- 检查是否有多个定时器在运行
- 刷新页面重试

### 问题3: 视觉效果不显示
**检查项**:
- 浏览器是否支持CSS动画
- 检查浏览器缩放比例（建议100%）
- 清除浏览器缓存重新加载

## 💡 进阶体验技巧

### 技巧1: 观察MP条脉冲
- 将MP消耗到50%左右
- 注意观察MP条边缘的蓝色光晕
- 光晕每2秒一个周期，与回复同步

### 技巧2: 战略性使用技能
- 观察当前MP值
- 当MP > 60时，可以连续使用2-3次技能
- 然后切换普通攻击，等待MP回复

### 技巧3: 利用战斗日志
- 战斗日志会显示MP回复（概率33%）
- 绿色边框的日志表示治疗/回复类型
- 可以通过日志验证回复是否正常

## 🎯 预期游戏体验

### 节奏感
- **前期**: MP较少，需要谨慎使用技能
- **中期**: MP增长，可以更频繁使用技能
- **后期**: MP充足，技能与普攻自由切换

### 策略性
- 长期战斗中，MP管理成为关键
- 需要在技能伤害和MP消耗间取得平衡
- 自动回复让持续冒险成为可能

### 流畅性
- 无需频繁点击休息
- 战斗节奏更连贯
- 减少等待时间，提升游戏体验

---

**提示**: 建议在实际游戏中完整体验以上所有场景，以充分感受MP自动回复系统对游戏性的提升！
