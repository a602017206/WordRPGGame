# MPè‡ªåŠ¨å›žå¤ç³»ç»Ÿè¯´æ˜Žæ–‡æ¡£

## ðŸ“‹ åŠŸèƒ½æ¦‚è¿°

åœ¨å†’é™©é¡µé¢çš„æˆ˜æ–—ç³»ç»Ÿä¸­ï¼Œå·²å®žçŽ°è§’è‰²é­”æ³•å€¼(MP)çš„è‡ªåŠ¨å›žå¤æœºåˆ¶ï¼Œè®©æˆ˜æ–—æ›´å…·ç­–ç•¥æ€§å’ŒæŒç»­æ€§ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### 1. è‡ªåŠ¨å›žå¤æœºåˆ¶
- **å›žå¤é¢‘çŽ‡**: æ¯2ç§’è‡ªåŠ¨å›žå¤ä¸€æ¬¡
- **å›žå¤æ•°å€¼**: æ¯æ¬¡å›žå¤2-5ç‚¹MPï¼ˆéšæœºå€¼ï¼Œä¿è¯å¹³è¡¡æ€§ï¼‰
- **å›žå¤ä¸Šé™**: MPä¸ä¼šè¶…è¿‡è§’è‰²å½“å‰ç­‰çº§å¯¹åº”çš„æœ€å¤§MPå€¼
- **æŒç»­ç”Ÿæ•ˆ**: ä»Žè¿›å…¥å†’é™©é¡µé¢å¼€å§‹ï¼ŒæŒç»­è¿è¡Œç›´åˆ°ç¦»å¼€é¡µé¢

### 2. å›žå¤åœºæ™¯
âœ… æˆ˜æ–—ä¸­æŒç»­å›žå¤
âœ… ç©ºé—²çŠ¶æ€æŒç»­å›žå¤
âœ… æ™®é€šæ”»å‡»åŽæŒç»­å›žå¤
âœ… æŠ€èƒ½æ”»å‡»åŽæŒç»­å›žå¤
âœ… ä¼‘æ¯æ—¶æŒç»­å›žå¤

### 3. è§†è§‰åé¦ˆ

#### MPæ¡åŠ¨ç”»æ•ˆæžœ
- **è„‰å†²å…‰æ™•**: MPæ¡å¸¦æœ‰å‘¼å¸ç¯æ•ˆæžœï¼Œæ¯2ç§’ä¸€ä¸ªå‘¨æœŸ
- **å¹³æ»‘è¿‡æ¸¡**: MPæ•°å€¼å˜åŒ–é‡‡ç”¨0.5ç§’ç¼“åŠ¨åŠ¨ç”»
- **é¢œè‰²æ¸å˜**: è“è‰²æ¸å˜æ¡ï¼ˆ#4facfe â†’ #00f2feï¼‰

#### è‡ªåŠ¨å›žå¤æŒ‡ç¤ºå™¨
- **æ—‹è½¬å›¾æ ‡**: MPæ ‡ç­¾æ—æ˜¾ç¤ºæ—‹è½¬çš„ â†» ç¬¦å·
- **æ‚¬åœæç¤º**: é¼ æ ‡æ‚¬åœæ˜¾ç¤º"æ¯2ç§’è‡ªåŠ¨å›žå¤2-5ç‚¹"
- **åŠ¨æ€æ•ˆæžœ**: 3ç§’å®Œæ•´æ—‹è½¬ä¸€å‘¨ï¼Œé…åˆé€æ˜Žåº¦å˜åŒ–

#### æˆ˜æ–—æ—¥å¿—
- **æ™ºèƒ½æ˜¾ç¤º**: æ¯3æ¬¡å›žå¤ä»…æ˜¾ç¤º1æ¬¡æ—¥å¿—ï¼Œé¿å…åˆ·å±
- **ç»¿è‰²æ ‡è®°**: å›žå¤æ—¥å¿—ä½¿ç”¨healç±»åž‹ï¼Œç»¿è‰²è¾¹æ¡†é«˜äº®
- **æ ¼å¼ç¤ºä¾‹**: `MPè‡ªåŠ¨å›žå¤ +3`

## ðŸ”§ æŠ€æœ¯å®žçŽ°

### æ–‡ä»¶ä¿®æ”¹æ¸…å•

#### 1. `/src/composables/useAdventure.ts`
- æ–°å¢ž `mpRegenerationTimer` å®šæ—¶å™¨å˜é‡
- æ–°å¢ž `startMpRegeneration()` å¯åŠ¨MPå›žå¤æ–¹æ³•
- æ–°å¢ž `stopMpRegeneration()` åœæ­¢MPå›žå¤æ–¹æ³•
- åœ¨åˆå§‹åŒ–æ—¶è‡ªåŠ¨å¯åŠ¨MPå›žå¤
- å¯¼å‡º `stopMpRegeneration` ä¾›ç»„ä»¶è°ƒç”¨

```typescript
// MPè‡ªåŠ¨å›žå¤æ ¸å¿ƒé€»è¾‘
mpRegenerationTimer = window.setInterval(() => {
  if (currentMp.value < character.stats.mp) {
    const mpRegenAmount = Math.floor(2 + Math.random() * 4)
    const oldMp = currentMp.value
    currentMp.value = Math.min(character.stats.mp, currentMp.value + mpRegenAmount)
    
    const actualRegen = currentMp.value - oldMp
    if (actualRegen > 0 && Math.random() < 0.33) {
      addLog(`MPè‡ªåŠ¨å›žå¤ +${actualRegen}`, 'heal')
    }
  }
}, 2000)
```

#### 2. `/src/views/AdventureView.vue`
- åœ¨ `onUnmounted` ç”Ÿå‘½å‘¨æœŸä¸­è°ƒç”¨ `stopMpRegeneration()`
- MPæ ‡ç­¾æ·»åŠ è‡ªåŠ¨å›žå¤æŒ‡ç¤ºå™¨ â†»
- æ·»åŠ  `.mp-regen-indicator` æ ·å¼ç±»
- æ·»åŠ  `@keyframes mp-regen-spin` æ—‹è½¬åŠ¨ç”»
- æ·»åŠ  `@keyframes mp-pulse` è„‰å†²åŠ¨ç”»

## ðŸ“Š æ•°å€¼å¹³è¡¡

### MPå›žå¤é€ŸçŽ‡
- **åŸºç¡€å›žå¤**: 2-5ç‚¹/2ç§’ = 1-2.5ç‚¹/ç§’
- **å¹³å‡å›žå¤**: 3.5ç‚¹/2ç§’ = 1.75ç‚¹/ç§’
- **æŠ€èƒ½æ¶ˆè€—**: 20ç‚¹MPï¼ˆæŠ€èƒ½æ”»å‡»ï¼‰

### å›žå¤æ—¶é—´ä¼°ç®—
å‡è®¾è§’è‰²MPä»Ž0æ¢å¤åˆ°æ»¡ï¼š
- **100 MPè§’è‰²**: çº¦57-114ç§’ï¼ˆ~1-2åˆ†é’Ÿï¼‰
- **150 MPè§’è‰²**: çº¦86-171ç§’ï¼ˆ~1.5-3åˆ†é’Ÿï¼‰

### æˆ˜æ–—å¹³è¡¡
- æŠ€èƒ½æ¶ˆè€—20 MPï¼Œéœ€è¦çº¦11-23ç§’è‡ªç„¶å›žå¤
- é¼“åŠ±çŽ©å®¶æ··åˆä½¿ç”¨æ™®é€šæ”»å‡»å’ŒæŠ€èƒ½
- é•¿æœŸæˆ˜æ–—èƒ½ä¿æŒä¸€å®šçš„æŠ€èƒ½ä½¿ç”¨é¢‘çŽ‡

## ðŸŽ® ç”¨æˆ·ä½“éªŒ

### ä¼˜ç‚¹
âœ… **æ— éœ€æ‰‹åŠ¨æ“ä½œ**: è‡ªåŠ¨åŽå°å›žå¤ï¼Œé™ä½Žæ“ä½œè´Ÿæ‹…
âœ… **è§†è§‰ç›´è§‚**: åŠ¨ç”»æ•ˆæžœè®©çŽ©å®¶æ¸…æ¥šçœ‹åˆ°MPåœ¨å›žå¤
âœ… **ç­–ç•¥æ€§å¢žå¼º**: çŽ©å®¶éœ€è¦æƒè¡¡æŠ€èƒ½ä½¿ç”¨æ—¶æœº
âœ… **æŒç»­æˆ˜æ–—**: æ”¯æŒé•¿æ—¶é—´å†’é™©è€Œä¸ç”¨é¢‘ç¹ä¼‘æ¯

### è®¾è®¡è€ƒè™‘
- **å›žå¤é€Ÿåº¦é€‚ä¸­**: æ—¢ä¸ä¼šå¤ªå¿«è®©MPæ— é™ä½¿ç”¨ï¼Œä¹Ÿä¸ä¼šå¤ªæ…¢å½±å“æ¸¸æˆèŠ‚å¥
- **éšæœºæ³¢åŠ¨**: 2-5ç‚¹çš„éšæœºå€¼å¢žåŠ ä¸å¯é¢„æµ‹æ€§
- **æ—¥å¿—ä¼˜åŒ–**: å‡å°‘åˆ·å±ï¼Œä¿æŒæ—¥å¿—æ¸…æ™°å¯è¯»
- **å¹³æ»‘åŠ¨ç”»**: é¿å…çªå…€çš„æ•°å€¼è·³å˜

## ðŸ› ï¸ ç»´æŠ¤ä¸Žæ‰©å±•

### è°ƒæ•´å›žå¤é€Ÿåº¦
åœ¨ `useAdventure.ts` ä¸­ä¿®æ”¹ä»¥ä¸‹å‚æ•°ï¼š

```typescript
// ä¿®æ”¹å›žå¤é—´éš”ï¼ˆæ¯«ç§’ï¼‰
}, 2000) // æ”¹ä¸º 1000 åˆ™æ¯1ç§’å›žå¤ä¸€æ¬¡

// ä¿®æ”¹å›žå¤æ•°å€¼èŒƒå›´
const mpRegenAmount = Math.floor(2 + Math.random() * 4) 
// æ”¹ä¸º Math.floor(5 + Math.random() * 6) åˆ™æ¯æ¬¡å›žå¤5-10ç‚¹
```

### æ‰©å±•åŠŸèƒ½å»ºè®®
1. **è£…å¤‡åŠ æˆ**: æŸäº›è£…å¤‡å¢žåŠ MPå›žå¤é€Ÿåº¦
2. **Buffç³»ç»Ÿ**: ä¸´æ—¶æå‡MPå›žå¤æ•ˆæžœ
3. **ä¼‘æ¯åŠ é€Ÿ**: ä¼‘æ¯çŠ¶æ€MPå›žå¤é€Ÿåº¦ç¿»å€
4. **æˆ˜æ–—å¤–å¢žå¼º**: éžæˆ˜æ–—çŠ¶æ€MPå›žå¤æ›´å¿«
5. **èŒä¸šå·®å¼‚**: æ³•å¸ˆèŒä¸šMPå›žå¤é€Ÿåº¦æ›´å¿«

### æ€§èƒ½è€ƒè™‘
- ä½¿ç”¨å•ä¸€å®šæ—¶å™¨ï¼Œæ€§èƒ½å¼€é”€æžå°
- ç»„ä»¶å¸è½½æ—¶æ­£ç¡®æ¸…ç†å®šæ—¶å™¨ï¼Œæ— å†…å­˜æ³„æ¼
- æ•°å€¼å˜åŒ–é‡‡ç”¨CSSåŠ¨ç”»ï¼ŒGPUåŠ é€Ÿï¼Œæµç•…åº¦é«˜

## ðŸ§ª æµ‹è¯•å»ºè®®

### åŠŸèƒ½æµ‹è¯•
1. âœ… è¿›å…¥å†’é™©é¡µé¢åŽMPå¼€å§‹è‡ªåŠ¨å›žå¤
2. âœ… ä½¿ç”¨æŠ€èƒ½æ¶ˆè€—MPåŽèƒ½æ­£å¸¸å›žå¤
3. âœ… MPè¾¾åˆ°æœ€å¤§å€¼åŽåœæ­¢å¢žé•¿
4. âœ… ç¦»å¼€é¡µé¢åŽå®šæ—¶å™¨æ­£ç¡®æ¸…ç†
5. âœ… åˆ·æ–°é¡µé¢åŽMPå›žå¤ç»§ç»­å·¥ä½œ

### è§†è§‰æµ‹è¯•
1. âœ… MPæ¡è„‰å†²åŠ¨ç”»æµç•…
2. âœ… å›žå¤æŒ‡ç¤ºå™¨æ—‹è½¬æ­£å¸¸
3. âœ… æˆ˜æ–—æ—¥å¿—æ˜¾ç¤ºåˆç†
4. âœ… æ•°å€¼å˜åŒ–å¹³æ»‘è¿‡æ¸¡

## ðŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2025-10-24)
- âœ… å®žçŽ°MPè‡ªåŠ¨å›žå¤æ ¸å¿ƒé€»è¾‘
- âœ… æ·»åŠ è§†è§‰åé¦ˆæ•ˆæžœ
- âœ… ä¼˜åŒ–æˆ˜æ–—æ—¥å¿—æ˜¾ç¤º
- âœ… å®Œå–„å®šæ—¶å™¨æ¸…ç†æœºåˆ¶

## ðŸŽ¯ ç¬¦åˆè§„èŒƒ

### è§’è‰²å±žæ€§æˆé•¿è§„èŒƒ
MPå›žå¤æœºåˆ¶å®Œå…¨å…¼å®¹çŽ°æœ‰çš„è§’è‰²å±žæ€§ç³»ç»Ÿï¼š
- âœ… å›žå¤ä¸Šé™å§‹ç»ˆä¸º `character.stats.mp`
- âœ… éšç€è§’è‰²å‡çº§ï¼ŒMPä¸Šé™æå‡ï¼Œå›žå¤ç›®æ ‡å€¼è‡ªåŠ¨è°ƒæ•´
- âœ… å‡çº§æ—¶MPè‡ªåŠ¨å›žæ»¡ï¼Œå›žå¤ç³»ç»Ÿæ­£å¸¸ç»§ç»­å·¥ä½œ

### æ•°æ®æŒä¹…åŒ–è§„èŒƒ
- âœ… MPå½“å‰å€¼é€šè¿‡ `currentMp` å“åº”å¼å¼•ç”¨ç®¡ç†
- âœ… ç»„ä»¶å¸è½½æ—¶ä¿å­˜è§’è‰²æœ€æ–°æ•°æ®åˆ° localStorage
- âœ… åˆ·æ–°é¡µé¢åŽMPå€¼æ­£ç¡®æ¢å¤

---

**æ€»ç»“**: MPè‡ªåŠ¨å›žå¤ç³»ç»Ÿä¸ºæˆ˜æ–—ç³»ç»Ÿæ³¨å…¥äº†æŒç»­æ€§å’Œç­–ç•¥æ€§ï¼Œé€šè¿‡åˆç†çš„æ•°å€¼è®¾è®¡å’Œæµç•…çš„è§†è§‰åé¦ˆï¼Œæ˜¾è‘—æå‡äº†æ¸¸æˆä½“éªŒã€‚ç³»ç»Ÿæž¶æž„æ¸…æ™°ï¼Œæ˜“äºŽç»´æŠ¤å’Œæ‰©å±•ã€‚
